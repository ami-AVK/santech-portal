---
import Search from "./Search.astro";
import data from "../data/header_links.json";
import Button from "./Button.astro";
import Drawer from "./Drawer.astro";
const pathname = new URL(Astro.request.url).pathname;
const main = pathname[0];
---
<header class="p-4 bg-gray-100/20 border-b border-white backdrop-blur-sm text-gray-100 sticky top-0 z-10 ">
	<!-- <div class="absolute h-80 bg-gradient-to-t from-main-900 via-accent-400 to-gray-100 -inset-x-4  -z-50 -top-[319px]">

	</div> -->
	<div class="flex justify-between h-fit px-16 transition-all">
        <a href={main} aria-label="Back to homepage" class="flex items-center object-center">
			<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 29.3 14.3" class="h-6 text-main-900">
				<g>
					<path class="st0" d="M5.6,6.5C5.6,7,5.7,7.5,6,7.9c0.7,0.9,1.9,1,2.7,0.4L19.8,0l-6.5,0L6.4,5.2C6,5.5,5.7,6,5.6,6.5z"/>
					<polygon class="st0" points="20.1,9 24.1,14.1 29,14.1 23.4,6.6 	"/>
					<polygon class="st0" points="15.5,12.5 16.7,14.1 21.8,14.1 18.7,10.1 	"/>
					<path class="st0" d="M9.8,9.7c-0.7,0.5-1.5,0.8-2.3,0.8c-1.1,0-2.2-0.6-2.9-1.5C4,8.1,3.7,7.2,3.9,6.2c0.2-1,0.7-1.9,1.5-2.5l5-3.7
						L3.9,0L3,0.7c-3.3,2.5-4,7.2-1.6,10.6c2.5,3.3,7.2,4,10.6,1.6L29.3,0l-6.5,0L9.8,9.7z"/>
				</g>
			</svg>
		</a>
		<ul class="hidden space-x-3 lg:flex items-start">
			{
				data.map((item) => (
					<li class="group hover:outline bg-white  outline-gray-200/50 hover:shadow-lg rounded-full transition-transform hover:-translate-y-1">
						<a href={item.url} class=" ">
				  			<div class="p-2"><svg class=" w-6 h-6  text-gray-600 group-hover:text-main-900"><use xlink:href={"#"+item.icon_one}></use></svg></div>
							<div class=" bg-main-900 px-2  rounded-2xl absolute invisible group-hover:visible text-xs group-hover:translate-y-1 transition-transform whitespace-nowrap" > {item.title}</div>	
						</a>
					</li>
				  )
				  )
			  }
		</ul>
		<Search/>
		<button title="Open menu" id="open_drawer_btn" type="button" class="p-1 lg:hidden bg-main rounded-2xl">
			<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-8 h-8">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
			</svg>
		</button>
	</div>
	<!-- Навигация по страницы скрытая в drawer -->
	<Drawer id="main_nav_drawer">
		<slot name="drawer"/>
	</Drawer>
	<div class="absolute hidden lg:block text-gray-900 left-8 top-36 w-72">
		<slot name="drawer"/>
	</div>
	
</header>
<script>
	document.addEventListener('astro:page-load', () => {
		const drawer_btn:HTMLButtonElement = document.getElementById('open_drawer_btn') as HTMLButtonElement;
		drawer_btn.addEventListener('click', () =>{
			const main_nav_drawer:HTMLElement = document.getElementById('main_nav_drawer') as HTMLElement;
			main_nav_drawer.classList.toggle('transform-none');
		});

	 });
	// openDrawerButton
// drawer-navigation
</script>