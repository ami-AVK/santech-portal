---
import Layout from "../layouts/Layout.astro";
import Table from "../components/tables/Table.astro";
import Appbar from '../components/Appbar.astro'
import Breadcrumbs from "../components/Breadcrumbs.astro";
import Footer from '../components/Footer.astro';
import Drawer from "../components/Drawer.astro";

const pathname = new URL(Astro.request.url).pathname;
var count = (pathname.match(/\//g) || []).length;
console.log(count);
---
<Layout title="Портал компании «Сантехкомплект»">
    <Appbar/>
    <Drawer id="main_nav_drawer">
      <nav class="flex flex-col gap-4 py-2 text-white">
        <a class="block pb-2 font-extrabold tracking-wide uppercase text-md" href="/">
          Главная
        </a>
        <ul class="">
          <li class="py-1">
              <a class="block pb-2 font-bold leading-tight " href="">
                Департамент продаж "Строительство"
              </a>
              <ul class="pb-1 ">
                {   
                  ["Отдел №1", "Отдел №2","Отдел №3","Отдел №4"].map( // наполняем навигацию из коллекции по текущей категории
                    (item:any) => (
                      <li class="relative">
                        <a class="relative block px-2 py-1 text-sm leading-tight hover:outline lg:hover:bg-white outline-gray-300/50 rounded-2xl" href={"#"} >{item}</a>
                      </li>
                    )
                  )
                }
                {
                    ["Департамент №1", "Департамент №2","Департамент №3","Департамент №4"].map( // наполняем остальные категории
                      (category) => (
                        <li class="py-1.5">
                          <a class="block font-bold leading-tight " href={"#"}>
                            {category}
                          </a>
                        </li>
                        // ниже закоментил для генерации ссылок из других категорий
                        // articles[category].map(
                        //  (item) => (
                        //     <li>
                        //       <a href={"#"+item.id} class="" >{item.id.substring(item.id.lastIndexOf("/")+1,item.id.lastIndexOf("."))}</a>
                        //     </li>
                        //   )
                        // )
                      )
                    )
                  }
              </ul>
          </li>
        </ul>
      </nav>
    </Drawer>
    <div class=" flex px-4 py-16 mt-20 md:px-8 scroll-smooth">
      <main class="w-full flex gap-16">
        <section class="sidebar hidden lg:block sticky top-32 self-start ">
          <nav slot="drawer" class="flex flex-col gap-4 py-2">
            <a class="block pb-2 font-extrabold tracking-wide uppercase text-md" href="/">
              Главная
            </a>
            <ul class="">
              <li class="py-1">
                  <a class="block pb-2 font-bold leading-tight " href="">
                    Департамент продаж "Строительство"
                  </a>
                  <ul class="pb-1 ">
                    {   
                      ["Отдел №1", "Отдел №2","Отдел №3","Отдел №4"].map( // наполняем навигацию из коллекции по текущей категории
                        (item:any) => (
                          <li class="relative">
                            <a class="relative block px-2 py-1 text-sm leading-tight hover:outline lg:hover:bg-white outline-gray-300/50 rounded-2xl" href={"#"} >{item}</a>
                          </li>
                        )
                      )
                    }
                    {
                        ["Департамент №1", "Департамент №2","Департамент №3","Департамент №4"].map( // наполняем остальные категории
                          (category) => (
                            <li class="py-1.5">
                              <a class="block font-bold leading-tight " href={"#"}>
                                {category}
                              </a>
                            </li>
                            // ниже закоментил для генерации ссылок из других категорий
                            // articles[category].map(
                            //  (item) => (
                            //     <li>
                            //       <a href={"#"+item.id} class="" >{item.id.substring(item.id.lastIndexOf("/")+1,item.id.lastIndexOf("."))}</a>
                            //     </li>
                            //   )
                            // )
                          )
                        )
                      }
                  </ul>
              </li>
            </ul>
        </nav>
        </section>
        <section>
          <div class="flex flex-col">
            <div class="pl-4 md:pl-16">
                <div class="flex flex-col gap-2">
                    <Breadcrumbs level1="База знаний" level2="Телефонный справочник" class="-ml-4"></Breadcrumbs>
                    <h1 class="text-3xl font-black tracking-wide uppercase">Телефонный справочник</h1>
                </div>
            </div>
            <section>   
                <Table/>
            </section>
          </div>
        </section>

      </main>
    </div>
    <Footer/>
</Layout>
